<h1> Лабораторная работа. Настройка NAT для IPv4 </h1> 

<h2> Топология </h2>
<img src=>

<h2> Таблица адресации </h2>

| Устройство | Интерфейс |      IP-адрес      |   Маска подсети    |
|:----------:|:---------:|:------------------:|:------------------:|
| R1         | G0/0/0    | 209.165.200.230    | 255.255.255.248    |
|            | G0/0/1    | 192.168.1.1        | 255.255.255.0      |
| R2         | G0/0/0    | 209.165.200.225    | 255.255.255.248    |
|            | Lo1       | 209.165.200.1      | 255.255.255.224    |
| S1         | VLAN 1    | 192.168.1.11       | 255.255.255.0      |
| S2         | VLAN 1    | 192.168.1.12       | 255.255.255.0      |
| PC-A       | NIC       | 192.168.1.2        | 255.255.255.0      |
| PC-B       | NIC       | 192.168.1.3        | 255.255.255.0      |

<h2> Задачи </h2>

<ol>
  <li> Создание сети и настройка основных параметров устройства. </li>
  <li> Настройка и проверка NAT для IPv4. </li>
  <li> Настройка и проверка PAT для IPv4. </li>
  <li> Настройка и проверка статического NAT для IPv4. </li>
</ol>

<h2> Создание сети и настройка основных параметров устройства.</h2> 
<h2> Конфигурация маршрутизатора по умолчанию (R2):</h2> 

a.	Назначьте маршрутизатору имя устройства.
<p> enable >> configure terminal </p>
<p> > hostname R2 </p>
b.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
<p> > no ip domain-lookup </p>
c.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
<p> > enable secret class </p>
d.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
<p> > line console 0 </p>
<p> > password cisco </p>
e.	Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.
<p> > line vty 0 15 </p>
<p> > password cisco </p>
f.	Зашифруйте открытые пароли.
<p> > service password-encryption </p>
g.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.
<p> > banner motd # Unauthorized access is strictly prohibited. # </p>
h.	Настройте IP-адресации интерфейса, как указано в таблице выше.

interface g0/0/0
ip address 209.165.200.225 255.255.255.248

Добавляем loopback интерфейс

interface loopback 1
ip address 209.165.200.1 255.255.255.224

i.	Настройте маршрут по умолчанию. от R2 до  R1.
ip default-gateway 209.165.200.230

j.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.
<p> > copy running-config startup-config </p>

Аналогично настройка для R1

<h2> Конфигурация коммутатора по умолчанию (S1):</h2> 

a.	Присвойте коммутатору имя устройства.
<p> enable >> configure terminal </p>
<p> > hostname S1 </p>

b.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
<p> > no ip domain-lookup </p>

c.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.
<p> > enable secret class </p>

d.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.
<p> > line console 0 </p>
<p> > password cisco </p>

e.	Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.
<p> > line vty 0 15 </p>
<p> > password cisco </p>

f.	Зашифруйте открытые пароли.
<p> > service password-encryption </p>

g.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.
<p> > banner motd # Unauthorized access is strictly prohibited. # </p>

h.	Настройте IP-адресации интерфейса, как указано в таблице выше.

<p> > interface Vlan1 </p>
<p> > ip address 192.168.1.11 255.255.255.0 </p>
<p> > no shutdown </p>

h.	Выключите все интерфейсы, которые не будут использоваться.

interface range f0/4 - 17
shutdown
interface range f0/19 - 24
shutdown
interface range g0/1 - 2
shutdown

j.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.
<p> > copy running-config startup-config </p>

Аналогично для коммутатора S2 

<h2> Настройка и проверка NAT для IPv4. </h2>

access-list 1 permit 192.168.1.0 0.0.0.255
ip nat pool PUBLIC_ACCESS 209.165.200.226 209.165.200.228 netmask 255.255.255.248
ip nat inside source list 1 pool PUBLIC_ACCESS

Определяем внутренний интерфейс

interface g0/0/1
ip nat inside

Определяем внешний интерфейс

interface g0/0/0
ip nat outside

Попробуем проверить конфигурацию NAT

Пинги с PC-B до R2 не проходят, внутренний интерфейс R1 доступен, таблица NAT пуста, по статистике все в misses.
G0/0/0 на R2 c R1 пингуется.

